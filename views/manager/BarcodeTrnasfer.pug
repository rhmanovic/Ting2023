doctype html
html(lang="en")
  head
    meta(charset="UTF-8")
    meta(name="viewport" content="width=device-width, initial-scale=1.0")
    title Inventory Management
    link(rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css")
    link(rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css")
    style.
      @media (max-width: 380px) {
        .container {
          padding: 0 5px;
        }
        .form-control, .btn {
          font-size: 12px;
        }
      }

      #videoContainer {
          position: relative;
          width: 100%;
          max-width: 400px;
      }

      #videoElement {
          width: 100%;
          height: auto;
      }

      #result {
          margin-top: 20px;
          padding: 10px;
          width: 100%;
          border: 1px solid #ccc;
      }

      #detectionArea {
          position: absolute;
          border: 2px solid red;
          top: 50%;
          left: 50%;
          transform: translate(-50%, -50%);
          width: 50%; /* Adjust the width of the detection area */
          aspect-ratio: 1 / 1;
          pointer-events: none; /* Ensure the detection area doesn't intercept clicks */
          z-index: 1; /* Ensure the detection area is above the video */
      }

  body

    .container.my-4
      h1.text-center.mb-4 ماسح الباركود


      form(id="barcodeForm" class="mb-3")
        .row.justify-content-center
          input(type="", id="barcodeId", name="barcodeId", class="form-control", placeholder="Enter barcode")

          button.col-6.btn.btn-outline-primary#scanButton(type="submit")
            i.fas.fa-barcode.fa-2x

      hr
      h2.text-center.mb-3 طلب تحويل المخزون

      .table-responsive
        table.table.table-hover#inventoryTable
          thead
            tr
              th الاسم
              th ماركة
              th الكمية
          tbody
          


    .row.mt-3.mb-3.justify-content-center
      .col-auto
        input#sendFrom(type="text", name="sendFrom", class="form-control", placeholder="المصدر")
    .row.mt-3.mb-3.justify-content-center

      .col-auto
        button#postDataBtnTransfer.btn.btn-primary.btn-lg اطلب التحويل




    .modal.fade#productModal(tabindex='-1', role='dialog', aria-labelledby='productModalLabel', aria-hidden='true', show='true')
      .modal-dialog.modal-dialog-centered
        .modal-content
          .modal-body
            p#modalData


          .modal-footer
            button#closeModalBtn.btn.btn-secondary(type='button', data-bs-dismiss='modal') Close

    #qrModal.modal.fade(tabindex='-1', role='dialog', aria-labelledby='qrModalLabel', aria-hidden='true')
      .modal-dialog.modal-dialog-centered
        .modal-content
          .modal-body
            #videoContainer
              video#videoElement(autoplay, playsinline)
              div#detectionArea

          .modal-footer
            button#closeModalBtn.btn.btn-secondary(type='button', data-bs-dismiss='modal') Close

            
    // New Modal for Loading Page Notification
    .modal.fade#loadingPageModal(tabindex='-1', role='dialog', aria-labelledby='loadingPageModalLabel', aria-hidden='false', show='true', data-bs-backdrop='static', data-bs-keyboard='false')
      .modal-dialog.modal-dialog-centered(role='document')
        .modal-content
          .modal-header
            h5#inventoryActionModalLabel.modal-title Send / Request
          .modal-body
            .container.text-center
              .row.justify-content-center
                  button.btn.btn-success.col-8(type='button', data-bs-dismiss='modal', onclick="document.getElementById('sendFrom').value = 'quantityShop';") Qurain >>> Naseem
              br
              .row.justify-content-center
                  button.btn.btn-warning.col-8(type='button', data-bs-dismiss='modal', onclick="document.getElementById('sendFrom').value = 'quantitywarehouse01';") Naseem >>> Qurain
            
    // Confirmation Modal
    .modal.fade#confirmationModal(tabindex="-1", role="dialog", aria-labelledby="confirmationModalLabel", aria-hidden="true")
      .modal-dialog(role="document")
        .modal-content
          .modal-header
            h5#confirmationModalLabel.modal-title Confirmation
            button.close(type="button", data-bs-dismiss="modal", aria-label="Close")
              span(aria-hidden="true") ×
          .modal-body
            p Are you sure you want to delete this row?
          .modal-footer
            button.btn.btn-secondary(type="button", data-bs-dismiss="modal") Cancel
            button.btn.btn-danger#confirmDelete(type="button") Delete
    script(src="https://code.jquery.com/jquery-3.6.0.min.js")
    script(src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js")
    script(src="/barcode33.js") // Link to the external JavaScript file
    script(src="https://cdn.jsdelivr.net/npm/jsqr/dist/jsQR.min.js")
    script(src="/barcode2.js") // Link to the external JavaScript file
